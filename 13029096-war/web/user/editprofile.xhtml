<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough">

    <ui:composition template="../templates/common.xhtml">
        <ui:define name="title">
            Profile page
        </ui:define>
        <ui:define name="sidebar">
            <h2>Edit profile</h2>
            <h3><h:outputText value="#{editProfileBean.name}" /></h3>
        </ui:define>
        <ui:define name="main_content">

            <div class="row">
                <div class="form-horizontal">
                    <div class="form-group">
                        <label for="name" class="col-sm-2 control-label">Name</label>
                        <div class="col-sm-10">
                            <h:inputText id="name" 
                                         styleClass="form-control" 
                                         value="#{editProfileBean.name}"
                                         p:placeholder="Name"
                                         required="true"
                                         requiredMessage="Name is required"
                                         validatorMessage="Name contains invalid characters">
                                <f:validateRegex pattern="^[^\?\%\+\$\(\)\{\}\;\'\&amp;\&lt;\&gt;]+$" />
                            </h:inputText>
                            <h:message for="name" style="color:red" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="address1" class="col-sm-2 control-label">Address 1</label>
                        <div class="col-sm-10">
                            <h:inputText id="address1" 
                                         styleClass="form-control" 
                                         value="#{editProfileBean.addressLine1}"
                                         p:placeholder="Address line 1"
                                         required="true"
                                         requiredMessage="Address line 1 is required"
                                         validatorMessage="Address line 1 contains invalid characters">
                                <f:validateRegex pattern="^[^\?\%\+\$\(\)\{\}\;\'\&amp;\&lt;\&gt;]+$" />
                            </h:inputText>
                            <h:message for="address1" style="color:red" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="address1" class="col-sm-2 control-label">Address 2</label>
                        <div class="col-sm-10">
                            <h:inputText id="address2" 
                                         styleClass="form-control" 
                                         value="#{editProfileBean.addressLine2}"
                                         p:placeholder="Address line 2"
                                         validatorMessage="Address line 2 contains invalid characters">
                                <f:validateRegex pattern="^[^\?\%\+\$\(\)\{\}\;\'\&amp;\&lt;\&gt;]+$" />
                            </h:inputText>
                            <h:message for="address2" style="color:red" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="city" class="col-sm-2 control-label">City</label>
                        <div class="col-sm-10">
                            <h:inputText id="city" 
                                         styleClass="form-control" 
                                         value="#{editProfileBean.city}"
                                         p:placeholder="City"
                                         required="true"
                                         requiredMessage="City is required"
                                         validatorMessage="City can be only alphabetic characters and (' )">
                                <f:validateRegex pattern="^[^\?\%\+\$\(\)\{\}\;\'\&amp;\&lt;\&gt;]+$" />
                            </h:inputText>
                            <h:message for="city" style="color:red" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="state" class="col-sm-2 control-label">State</label>
                        <div class="col-sm-10">
                            <h:inputText id="state" 
                                         styleClass="form-control" 
                                         value="#{editProfileBean.state}"
                                         p:placeholder="State"
                                         required="true"
                                         requiredMessage="State is required"
                                         validatorMessage="State can be only alphabetic characters">
                                <f:validateRegex pattern="^[A-Z]{2}$" />
                            </h:inputText>
                            <h:message for="state" style="color:red" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="phone" class="col-sm-2 control-label">Phone</label>
                        <div class="col-sm-10">
                            <h:inputText id="phone" 
                                         styleClass="form-control" 
                                         value="#{editProfileBean.phone}"
                                         p:placeholder="Phone"
                                         required="true"
                                         requiredMessage="Phone is required"
                                         validatorMessage="Invalid phone format, should be as xxx-xxx-xxxx in numeric">
                                <f:validateRegex pattern="^(\d{3})[- ]?(\d{3})[- ]?(\d{4})$" />
                            </h:inputText>
                            <h:message for="phone" style="color:red" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="email" class="col-sm-2 control-label">Email</label>
                        <div class="col-sm-10">
                            <h:inputText id="email" 
                                         styleClass="form-control" 
                                         value="#{editProfileBean.email}"
                                         p:placeholder="Email"
                                         required="true"
                                         requiredMessage="Email is required"
                                         validatorMessage="Email contains illegal characters">
                                <f:validateRegex pattern="[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}" />
                            </h:inputText>
                            <h:message for="email" style="color:red" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="message" class="col-sm-2 control-label">Message</label>
                        <div class="col-sm-10">
                            <h:inputTextarea rows="5" id="message" 
                                             styleClass="form-control" 
                                             value="#{editProfileBean.message}"
                                             p:placeholder="Message"
                                             validatorMessage="Message contains illegal characters">
                                <f:validateLength minimum="0" maximum="500" />
                                <f:validateRegex pattern="^[^\%\+\$\(\)\{\}\;\'\&amp;\&lt;\&gt;]*$" />
                            </h:inputTextarea>
                            <h:message for="message" style="color:red" />
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                            <h:commandButton styleClass="btn btn-primary" action="#{editProfileBean.updateProfile()}"
                                             value ="Update profile" immediate="false"/>
                            <h:commandButton styleClass="btn btn-default pull-right" 
                                             action="editprofile" 
                                             value="Back to Start" immediate="true"/>
                        </div>
                    </div>
                </div>

            </div>
        </ui:define>
    </ui:composition>
</html>